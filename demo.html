<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>テキストを表示領域の「面積ベース」で断ち切る</title>
<link rel="stylesheet" href="css/reset.css">
<link rel="stylesheet" href="css/screen.css">

<script src="truncate-text.js"></script>

<style>
#contents-outer .show-example { padding: 20px;  }
#contents-outer .show-example .text-description { width: 100%; }
#contents-outer .show-example .text-description .content-text { display: block; width: 100%; height: 70px; border: 1px solid #ccc; border-radius: 3px; padding: 10px; overflow: hidden; }
</style>
</head>

<body>
<div id="page-outer">
<div id="wrapper">

<header id="header-title-page">
<h1 id="title-page">テキストを表示領域の「面積ベース」で断ち切る</h1>
</header>

<div id="contents-outer">

<div class="show-example">
<section>
<h2 class="heading-section">DEMO - truncate-text.js &gt; truncate-text()</h2>
<p class="text-lead">ブラウザ幅を変えてみてください</p>

<script>
(function(window, document, undefined) {

	document.addEventListener('DOMContentLoaded', function() {
		var listElem = document.querySelectorAll('.text-description p');
		truncateText(listElem);

		window.addEventListener('resize', function() {
			truncateText(listElem);
		});
	});

})(window, document);
</script>

<div class="text-description">
<p class="content-text">テキストを表示領域の「面積ベース」で断ち切る<strong>JavaScript</strong>関数です。セレクタで指定されたDOM内のテキストについて、領域から溢れる場合は最後に「…」を付与して断ち切り、溢れない場合はそのままのテキストを表示します。対象DOMはCSSでwidthとheightを指定のうえ、overflow: hiddenが指定されている必要があります。</p>
</div>
<div class="text-description">
<p class="content-text">Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
</div>
<div class="text-description">
<p class="content-text">時どき私はそんな路を歩きながら、ふと、そこが京都ではなくて京都から何百里も離れた仙台とか長崎とか――そのような市へ今自分が来ているのだ――という錯覚を起こそうと努める。私は、できることなら京都から逃げ出して誰一人知らないような市へ行ってしまいたかった。第一に安静。がらんとした旅館の一室。清浄な蒲団。匂いのいい蚊帳と糊のよくきいた浴衣。そこで一月ほど何も思わず横になりたい。希わくはここがいつの間にかその市になっているのだったら。――錯覚がようやく成功しはじめると私はそれからそれへ想像の絵具を塗りつけてゆく。なんのことはない、私の錯覚と壊れかかった街との二重写しである。そして私はその中に現実の私自身を見失うのを楽しんだ。</p>
</div>
</section>
<!-- /show-example --></div>

<!-- /contents-outer --></div>

<!-- /wrapper --></div>
<!-- /page-outer --></div>
</body>
</html>